## 1、什么情况需要考虑分库分表？

单表数据量太大（保证单表数据不超过 500W），sql 不复杂时考虑分库分表

## 2、如何设计分库分表策略？

## 3、常用的分库分表策略有哪些？

- **取模分片**

  优点：数据存放均匀

  缺点：扩容时需要大量数据进行迁移

- **按范围分片**

  优点：扩容不需要迁移数据

  缺点：数据存放不均匀，容易产生数据倾斜

- **按业务场景分片**

## 4、数据库优化

- **sql 优化**

  简化sql 语句、增加索引、

- **DB 优化**

  调整 DB 参数，加大内存

- **硬件优化**

  加硬盘

- **架构优化**

  读写分离、加缓存、分布式、分表分库

## 5、数据库的锁机制

- **共享锁**：多个事务封锁一个共享页

- **排它锁**：仅有一个事务可以封锁页

- **更新锁**：封锁页，多个事务可以读，但是更新时升级为排它锁，事务结束后释放更新锁

## 6、mysql 的主从复制是怎样的

- master 更新数据被写到 binlog
- slave 发起连接，连接到 master
- master 创建 binlog dump 线程，并把 binlog 发送到 slave
- slave 启动，创建 I/O 线程，用于读取 master 发送的 binlog，并写到 relay log内
- slave 创建 sql 线程，从 relay log 中读取，从 ExecMasterLog_Pos 位置开始执行读取到的事务，并写入 slave

## 7、mysql master 宕机怎么办?

使用将备用数据库切换为master

