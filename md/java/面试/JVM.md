## 1、JDK、JRE、JVM关系

- **JDK**

  JRE + development kit

- **JRE**

  JVM + core lib

- **JVM**：java 虚拟机

  classLoader、字节码解释器、JIT（即时编译器）、执行引擎、java类库

## 2、类加载机制是怎样的？

- **加载** loading

  将字节码文件读取加载到内存中的方法区，创建一个class对象存放在堆中，通过class对象可以访问二进制文件

- **链接** linking

  验证：验证二进制文件的文件格式、字节码等

  准备：给一些静态变量设置默认值

  解析：将常量池中的符号引用换成直接引用

- **初始化**

  执行用户代码

  > 类在使用时才会加载，若存在继承关系，则先加载父类

## 3、双亲委派机制是怎样的？

双亲委派机制主要将类的加载分为四个层次：bootstrap、Extension、app、custom

类加载时先从costom 缓存查找是否被加载了，如果已经加载则返回，

否则去app缓存中查找是否被加载，如果已经加载则返回，

否则去extension缓存中查找是否已经被加载，如果已经加载则返回，

否则去bootstrap缓存查找是否已经加载了，如果已经加载了则返回，

否则去extension对应的jre下的ext下查找class 进行加载，找到则加载，

否则去app对应的路径下查找class 进行加载，找到加载，

否则去 custom对应的目录下加载，找到加载

**总结：自下而上检查，自上而下查找和实际加载**

## 4、JVM运行时数据区都有哪些？

程序计数器：记录要执行的指令

栈：jvm栈：存放局部变量、对象引用、实例方法；本地方法栈：本地方法

堆：存放对象、字符串对象（字符串常量池）

方法区（元空间）：字节码文件（静态常量池）、静态成员、运行时常量（运行时常量池）

## 5、字符串常量池、静态常量池、运行时常量池区别有哪些？

字符串常量池：低版本在方法区，jdk7后移动到了堆，存放字符串常量

静态常量池：存放字节码文件、静态常量

运行时常量池：存放运行时常量，与class 文件中常量池一一对应，由class文件中常量池构成

## 6、垃圾回收机制

作用：一定程度上避免内存泄露，及时释放内存，但是会造成额外开销

特点：CG的基本单位是对象，不是字节码，主要作用于方法区和堆

原理：内存中的对象都是相互有联系的，通过联系则可构造有向图，图外的则就是需要回收的对象